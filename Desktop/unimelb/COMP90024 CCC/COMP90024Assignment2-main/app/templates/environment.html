{% extends 'sidebar.html' %}

{% block content %}


<div style="display:flex; flex-directon:row;">
    <div style="margin: 50px 0 50px 0;width:45%">
    <canvas id="weekday-chart" width="400" height="200"></canvas>
</div>

<div style="margin: 50px 0 50px 0;width:45%;margin-left:50px">
    <canvas id="each-day-chart" width="400" height="200"></canvas>
</div>
</div>

<div style="display:flex;flex-directon:row;">
    <img style="width:50%" src="../static/env_sentiment_vs_time.png">
    <img style="width:50%;" src="../static/env_word_cloud.png">
</div>

<div style="height: 600px; width: 600px; margin-left: auto; margin-right: auto;">
    <canvas id="doughnut-chart"></canvas>
</div>

<script type="text/javascript">


    // receive processed json
    var lang_table = {{ lang_json|safe }};
    var lang_values = {{ lang_values|safe }};
    var lang_labels = {{ lang_labels|safe }};
    var day_labels = {{ day_labels|safe }};
    var day_values = {{ day_values|safe }};
    var each_day_labels = {{ each_day_labels|safe }};
    var each_day_values = {{ each_day_values|safe }};

    // console.log(each_day_labels);
    // console.log(each_day_values);
    

    function convert_label(label){
        const languageNames = new Intl.DisplayNames(['en'], {
            type: 'language'
        });
        return languageNames.of(label)
    }
    var full_labels = lang_labels.map(convert_label)

    const COLORS = [
    '#4dc9f6',
    '#f67019',
    '#f53794',
    '#537bc4',
    '#acc236',
    '#166a8f',
    '#00a950',
    '#58595b',
    '#8549ba',
    '#264653',
    '#2A9D8F',
    '#E9C46A',
    '#F4A261',
    '#E76F51',
    '#E9D5DA',
    '#827397',
    '#4D4C7D',
    '#363062',
    '#EDE6DB',
    '#417D7A',
    '#1D5C63',
    '#1A3C40',
    '#8E3200',
    '#A64B2A',
    '#D7A86E',
    '#FFEBC1',
    '#B4FF9F',
    '#F9FFA4',
    '#FFD59E',
    '#FFA1A1',
    '#F73D93',
    '#16003B',
    '#413F42',
    '#7F8487'
    ];

    // console.log(day_json);
    // create doughnut chart
    const doughnut_chart = new Chart('doughnut-chart', {
    type: 'doughnut',
    data: {
    labels: full_labels,
    datasets: [{
        data: lang_values,
        backgroundColor: COLORS,
    }]
    },
    options:{
        
        plugins:{
            legend:{
                position: 'top',
            },
            title:{
                display: true,
                text: 'Number of languages used in tweets',
            }
        }
    }

    });

    // bar chart shows difference of number of tweets on weekdays and weekends
    const week_chart = new Chart('weekday-chart', {
    type: 'bar',
    data: {
    labels: day_labels,
    datasets: [{
      data: day_values,
      backgroundColor: COLORS
    }]
    },
    options: {
        plugins:{
            legend: {display: false},
            title: {
            display: true,
            text: "number of tweets on weekdays vs. weekends"
            }
        }
        
    }
    });

    const each_day_chart = new Chart('each-day-chart', {
    type: 'bar',
    data: {
    labels: each_day_labels,
    datasets: [{
      data: each_day_values,
      backgroundColor: COLORS
    }]
    },
    options: {
        plugins:{
            legend: {display: false},
            title: {
            display: true,
            text: "number of tweets day of a week"
            }
        }
        
    }

    });

    
</script>


{% endblock %}

